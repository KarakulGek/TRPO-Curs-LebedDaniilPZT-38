unit UStats;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Imaging.pngimage,
  Vcl.ExtCtrls, Vcl.Grids, System.ImageList, Vcl.ImgList;

type
  TStats = class(TForm)
    StatGrid: TStringGrid;
    PImage: TImage;
    EButton: TButton;
    SwordImage: TImage;
    AmuletImage: TImage;
    StatsimageList: TImageList;
    procedure FormShow(Sender: TObject);
    procedure EButtonClick(Sender: TObject);
  private
  public
  end;

var
  Stats: TStats;

implementation

{$R *.dfm}

uses UGame, UInv;


procedure TStats.EButtonClick(Sender: TObject);
begin
 Stats.Close;   //Закрытие формы
end;

procedure TStats.FormShow(Sender: TObject);
begin
  for var j:integer := 0 to Inventory.ItemListBox.Items.Count - 1 do begin
   //Если в инвентаре присутствует меч или амулет, то добавляет соответствующие картинки
   if Inventory.ItemListBox.Items[j] = 'Меч' then StatsImageList.GetIcon(0,SwordImage.Picture.Icon)
   else if Inventory.ItemListBox.Items[j] = 'Амулет' then StatsImageList.GetIcon(1,AmuletImage.Picture.Icon);
  end;
  //Заполняет таблицу характеристик
  StatGrid.Cells[1,0]:= inttostr(p.hp);
  StatGrid.Cells[0,0]:= 'Здоровье';
  StatGrid.Cells[1,1]:= inttostr(p.dmg);
  StatGrid.Cells[0,1]:= 'Урон';
  StatGrid.Cells[1,2]:= inttostr(Points);
  StatGrid.Cells[0,2]:= 'Очки';
end;

end.
